<div class="document-card" id="document-<%= document.id %>">
  <div class="document-card-icon">
    <% case document.file_extension&.downcase %>
    <% when "pdf" %>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
        <path d="M9 15v2m0-2a2 2 0 1 0 0-4v4zm6-4v6"/>
      </svg>
    <% when "doc", "docx" %>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
        <line x1="16" y1="13" x2="8" y2="13"/>
        <line x1="16" y1="17" x2="8" y2="17"/>
      </svg>
    <% when "jpg", "jpeg", "png" %>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
        <circle cx="8.5" cy="8.5" r="1.5"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
    <% else %>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
      </svg>
    <% end %>
  </div>

  <div class="document-card-content">
    <div class="document-card-header">
      <h3 class="document-card-name"><%= document.name %></h3>
      <span class="badge badge-sm <%= document_visibility_badge_class(document.visibility) %>">
        <% if document.private? %>
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        <% elsif document.shared? %>
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
          </svg>
        <% else %>
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
          </svg>
        <% end %>
        <%= document.visibility.titleize %>
      </span>
    </div>

    <div class="document-card-meta">
      <span class="badge badge-sm badge-gray"><%= document.document_type_display %></span>
      <span><%= document.file_extension %></span>
      <span><%= document.file_size_display %></span>
      <span><%= time_ago_in_words(document.created_at) %> ago</span>
    </div>

    <% if document.description.present? %>
      <p class="document-card-description"><%= truncate(document.description, length: 100) %></p>
    <% end %>
  </div>

  <div class="document-card-actions">
    <% if document.file.attached? %>
      <%= link_to rails_blob_path(document.file, disposition: "inline"), target: "_blank", class: "btn btn-sm btn-secondary" do %>
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
        View
      <% end %>

      <%= link_to rails_blob_path(document.file, disposition: "attachment"), class: "btn btn-sm btn-ghost" do %>
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Download
      <% end %>
    <% end %>

    <% if document.user_id == current_user.id %>
      <%= button_to document_path(document), method: :delete, class: "btn btn-sm btn-ghost btn-danger", data: { turbo_confirm: "Are you sure you want to delete this document?" } do %>
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
        </svg>
        Delete
      <% end %>
    <% end %>
  </div>
</div>
