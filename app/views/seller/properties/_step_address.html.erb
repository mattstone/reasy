<%# Step 1: Address & Type %>
<div class="dashboard-panel mb-6">
  <div class="dashboard-panel-header">
    <div>
      <h2 class="dashboard-panel-title">Property Address</h2>
      <p class="dashboard-panel-subtitle">Enter the property's street address</p>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group" style="flex: 0 0 120px;">
      <%= f.label :unit_number, "Unit #", class: "form-label" %>
      <%= f.text_field :unit_number, class: "form-input", placeholder: "e.g. 12" %>
    </div>

    <div class="form-group" style="flex: 1;">
      <%= f.label :street_address, "Street Address", class: "form-label form-label-required" %>
      <%= f.text_field :street_address, class: "form-input", placeholder: "e.g. 123 Main Street", required: true %>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <%= f.label :suburb, "Suburb", class: "form-label form-label-required" %>
      <%= f.text_field :suburb, class: "form-input", placeholder: "e.g. Sydney", required: true %>
    </div>

    <div class="form-group">
      <%= f.label :state, "State", class: "form-label form-label-required" %>
      <%= f.select :state,
            options_for_select([
              ["New South Wales", "NSW"],
              ["Victoria", "VIC"],
              ["Queensland", "QLD"],
              ["Western Australia", "WA"],
              ["South Australia", "SA"],
              ["Tasmania", "TAS"],
              ["Australian Capital Territory", "ACT"],
              ["Northern Territory", "NT"]
            ], property.state),
            { include_blank: "Select state..." },
            class: "form-select", required: true %>
    </div>

    <div class="form-group" style="flex: 0 0 140px;">
      <%= f.label :postcode, "Postcode", class: "form-label form-label-required" %>
      <%= f.text_field :postcode, class: "form-input", placeholder: "e.g. 2000", maxlength: 4, required: true %>
    </div>
  </div>
</div>

<div class="dashboard-panel">
  <div class="dashboard-panel-header">
    <div>
      <h2 class="dashboard-panel-title">Property Type</h2>
      <p class="dashboard-panel-subtitle">Select the type of property you're listing</p>
    </div>
  </div>

  <div class="grid grid-cols-4 gap-4">
    <% Property::PROPERTY_TYPES.each do |type| %>
      <label class="property-type-card" style="cursor: pointer;">
        <%= f.radio_button :property_type, type,
              class: "hidden",
              data: { action: "change->property-type#toggle" } %>
        <div class="property-type-card-inner p-4" style="
          background: var(--color-gray-50);
          border-radius: var(--radius-lg);
          border: 2px solid <%= property.property_type == type ? 'var(--color-primary)' : 'transparent' %>;
          <%= property.property_type == type ? 'background: var(--color-primary-pale);' : '' %>
          transition: all var(--transition-fast);
          text-align: center;
        ">
          <div class="mb-2">
            <% case type %>
            <% when "house" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
              </svg>
            <% when "townhouse" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="M3 21h18"/>
                <path d="M5 21V7l4-4 4 4v14"/>
                <path d="M13 21V11l4-4 4 4v10"/>
                <path d="M9 3v4"/>
                <path d="M17 7v4"/>
              </svg>
            <% when "apartment", "unit" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <rect width="16" height="20" x="4" y="2" rx="2" ry="2"/>
                <path d="M9 22v-4h6v4"/>
                <path d="M8 6h.01"/>
                <path d="M16 6h.01"/>
                <path d="M12 6h.01"/>
                <path d="M12 10h.01"/>
                <path d="M12 14h.01"/>
                <path d="M16 10h.01"/>
                <path d="M16 14h.01"/>
                <path d="M8 10h.01"/>
                <path d="M8 14h.01"/>
              </svg>
            <% when "land" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="M2 22 16 8"/>
                <path d="M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"/>
                <path d="M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
              </svg>
            <% when "rural", "acreage" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="m12 3-4 4-4-4"/>
                <path d="M4 7v14"/>
                <path d="M20 7v14"/>
                <path d="m8 3 4 4 4-4"/>
                <path d="M8 7v14"/>
                <path d="M16 7v14"/>
                <path d="M4 11h4"/>
                <path d="M4 15h4"/>
                <path d="M4 19h4"/>
                <path d="M16 11h4"/>
                <path d="M16 15h4"/>
                <path d="M16 19h4"/>
              </svg>
            <% when "commercial" %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
                <path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/>
                <path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/>
                <path d="M10 6h4"/>
                <path d="M10 10h4"/>
                <path d="M10 14h4"/>
                <path d="M10 18h4"/>
              </svg>
            <% else %>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-500);">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              </svg>
            <% end %>
          </div>
          <div class="font-medium"><%= type.humanize %></div>
        </div>
      </label>
    <% end %>
  </div>
</div>

<style>
  .property-type-card input:checked + .property-type-card-inner {
    border-color: var(--color-primary);
    background: var(--color-primary-pale);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.property-type-card');
    cards.forEach(card => {
      card.addEventListener('change', function() {
        document.querySelectorAll('.property-type-card-inner').forEach(inner => {
          inner.style.borderColor = 'transparent';
          inner.style.background = 'var(--color-gray-50)';
        });
        const inner = this.querySelector('.property-type-card-inner');
        inner.style.borderColor = 'var(--color-primary)';
        inner.style.background = 'var(--color-primary-pale)';
      });
    });
  });
</script>
