<%# Step 4: Photos %>
<div class="dashboard-panel mb-6">
  <div class="dashboard-panel-header">
    <div>
      <h2 class="dashboard-panel-title">Hero Image</h2>
      <p class="dashboard-panel-subtitle">This will be the main image shown in search results</p>
    </div>
  </div>

  <div class="form-group">
    <% if property.hero_image.attached? %>
      <div class="mb-4" style="position: relative; display: inline-block;">
        <%= image_tag property.hero_image, style: "max-width: 400px; max-height: 300px; border-radius: var(--radius-lg); object-fit: cover;" %>
        <div style="position: absolute; top: var(--space-2); right: var(--space-2);">
          <span class="badge badge-success">Current Hero Image</span>
        </div>
      </div>
    <% end %>

    <div class="file-upload-area" style="
      border: 2px dashed var(--color-gray-300);
      border-radius: var(--radius-lg);
      padding: var(--space-8);
      text-align: center;
      background: var(--color-gray-50);
      cursor: pointer;
      transition: all var(--transition-fast);
    " onclick="document.getElementById('property_hero_image').click()">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-400);">
        <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
        <circle cx="9" cy="9" r="2"/>
        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
      </svg>
      <p class="mt-4 font-medium">Click to upload hero image</p>
      <p class="text-small text-muted mt-1">JPG, PNG up to 10MB</p>
      <%= f.file_field :hero_image, accept: "image/*", class: "hidden", id: "property_hero_image" %>
    </div>
  </div>
</div>

<div class="dashboard-panel mb-6">
  <div class="dashboard-panel-header">
    <div>
      <h2 class="dashboard-panel-title">Property Photos</h2>
      <p class="dashboard-panel-subtitle">Add multiple photos to showcase your property</p>
    </div>
  </div>

  <% if property.photos.attached? %>
    <div class="grid grid-cols-4 gap-4 mb-6">
      <% property.photos.each_with_index do |photo, index| %>
        <div style="position: relative;">
          <%= image_tag photo, style: "width: 100%; height: 150px; object-fit: cover; border-radius: var(--radius-lg);" %>
          <div style="position: absolute; top: var(--space-2); left: var(--space-2);">
            <span class="badge" style="background: rgba(0,0,0,0.6); color: white;"><%= index + 1 %></span>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="form-group">
    <div class="file-upload-area" style="
      border: 2px dashed var(--color-gray-300);
      border-radius: var(--radius-lg);
      padding: var(--space-8);
      text-align: center;
      background: var(--color-gray-50);
      cursor: pointer;
      transition: all var(--transition-fast);
    " onclick="document.getElementById('property_photos').click()">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-400);">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17 8 12 3 7 8"/>
        <line x1="12" x2="12" y1="3" y2="15"/>
      </svg>
      <p class="mt-4 font-medium">Click to upload photos</p>
      <p class="text-small text-muted mt-1">Select multiple files. JPG, PNG up to 10MB each.</p>
      <%= f.file_field :photos, multiple: true, accept: "image/*", class: "hidden", id: "property_photos" %>
    </div>
    <p class="form-help mt-2">
      <% if property.photos.attached? %>
        <%= property.photos.count %> photo<%= property.photos.count == 1 ? '' : 's' %> currently uploaded. Upload more to add to the gallery.
      <% else %>
        We recommend uploading at least 10 photos for best results.
      <% end %>
    </p>
  </div>
</div>

<div class="dashboard-panel">
  <div class="dashboard-panel-header">
    <div>
      <h2 class="dashboard-panel-title">Floor Plans</h2>
      <p class="dashboard-panel-subtitle">Upload floor plans to help buyers understand the layout</p>
    </div>
  </div>

  <% if property.floor_plans.attached? %>
    <div class="grid grid-cols-3 gap-4 mb-6">
      <% property.floor_plans.each do |plan| %>
        <div style="position: relative;">
          <%= image_tag plan, style: "width: 100%; height: 200px; object-fit: contain; border-radius: var(--radius-lg); background: white; border: 1px solid var(--color-gray-200);" %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="form-group">
    <div class="file-upload-area" style="
      border: 2px dashed var(--color-gray-300);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      text-align: center;
      background: var(--color-gray-50);
      cursor: pointer;
      transition: all var(--transition-fast);
    " onclick="document.getElementById('property_floor_plans').click()">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto; color: var(--color-gray-400);">
        <rect width="18" height="18" x="3" y="3" rx="2"/>
        <path d="M3 9h18"/>
        <path d="M9 21V9"/>
      </svg>
      <p class="mt-3 font-medium">Click to upload floor plans</p>
      <p class="text-small text-muted mt-1">JPG, PNG, PDF up to 10MB</p>
      <%= f.file_field :floor_plans, multiple: true, accept: "image/*,.pdf", class: "hidden", id: "property_floor_plans" %>
    </div>
  </div>
</div>

<style>
  .file-upload-area:hover {
    border-color: var(--color-primary);
    background: var(--color-primary-pale);
  }
</style>
