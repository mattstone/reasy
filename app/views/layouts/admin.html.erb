<!DOCTYPE html>
<html>
  <head>
    <title>Admin - Reasy</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="icon" href="/icon.png" type="image/png">
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="sidebar-header">
          <%= link_to admin_dashboard_path, class: "sidebar-logo" do %>
            <div class="sidebar-logo-icon">R</div>
            <span class="sidebar-logo-text">Re<span>asy</span></span>
          <% end %>
        </div>

        <div class="customer-selector">
          <div class="customer-selector-button">
            <div class="customer-avatar">
              <%= current_user.name&.first&.upcase || "A" %>
            </div>
            <div class="customer-info">
              <div class="customer-name"><%= current_user.name || "Admin" %></div>
              <div class="customer-meta" style="color: var(--color-accent);">Admin Panel</div>
            </div>
          </div>
        </div>

        <nav class="sidebar-nav" data-controller="admin-nav" data-admin-nav-current-path-value="<%= request.path %>">
          <%# Overview %>
          <div class="nav-section">
            <%= link_to admin_dashboard_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_dashboard_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg></span><span class="nav-item-label">Dashboard</span><% end %>
          </div>

          <%# Business Intelligence Section %>
          <div class="nav-section">
            <div class="nav-section-title">Business Intelligence</div>
            <%= link_to admin_business_root_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_business_root_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg></span><span class="nav-item-label">Overview</span><% end %>
            <%= link_to admin_business_revenue_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_business_revenue_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></span><span class="nav-item-label">Revenue</span><% end %>
            <%= link_to admin_business_users_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_business_users_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg></span><span class="nav-item-label">User Growth</span><% end %>
            <%= link_to admin_business_transactions_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_business_transactions_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg></span><span class="nav-item-label">Transactions</span><% end %>
          </div>

          <%# Application Health Section %>
          <div class="nav-section">
            <div class="nav-section-title">Application Health</div>
            <%= link_to admin_system_root_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_system_root_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></span><span class="nav-item-label">System Status</span><% end %>
            <%= link_to admin_system_usage_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_system_usage_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></span><span class="nav-item-label">Platform Usage</span><% end %>
            <%= link_to admin_system_ai_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_system_ai_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg></span><span class="nav-item-label">AI Analytics</span><% end %>
            <%= link_to admin_system_audit_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_system_audit_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg></span><span class="nav-item-label">Audit Activity</span><% end %>
          </div>

          <%# Manage Data Section %>
          <div class="nav-section">
            <div class="nav-section-title">Manage Data</div>
            <%= link_to admin_users_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_users_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></span><span class="nav-item-label">Users</span><% end %>
            <%= link_to admin_properties_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_properties_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span><span class="nav-item-label">Properties</span><% end %>
            <%= link_to admin_transactions_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_transactions_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></span><span class="nav-item-label">Transactions</span><% end %>
            <%= link_to admin_reviews_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_reviews_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></span><span class="nav-item-label">Reviews</span><% end %>
            <%= link_to admin_audit_logs_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_audit_logs_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg></span><span class="nav-item-label">Audit Logs</span><% end %>
          </div>

          <%# Settings Section %>
          <div class="nav-section">
            <div class="nav-section-title">Settings</div>
            <%= link_to admin_settings_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_settings_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span><span class="nav-item-label">Platform Settings</span><% end %>
            <%= link_to admin_ai_conversations_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_ai_conversations_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span><span class="nav-item-label">AI Conversations</span><% end %>
            <%= link_to admin_legal_documents_path, class: "nav-item", data: { turbo_frame: "admin_content", admin_nav_target: "link", path: admin_legal_documents_path } do %><span class="nav-item-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></span><span class="nav-item-label">Legal Documents</span><% end %>
          </div>
        </nav>

        <div class="sidebar-footer">
          <%= link_to dashboard_path, class: "btn btn-sm btn-secondary", style: "width: 100%; margin-bottom: var(--space-3);" do %>
            ‚Üê Back to Site
          <% end %>
          <div style="font-size: var(--font-size-xs); color: var(--color-gray-400); margin-bottom: var(--space-2);">
            <%= current_user.email %>
          </div>
          <%= button_to "Log out", destroy_user_session_path, method: :delete, class: "btn btn-sm btn-secondary", style: "width: 100%;" %>
        </div>
      </aside>

      <main class="layout-main">
        <%= turbo_frame_tag "admin_content", data: { turbo_action: "advance" } do %>
          <div class="content">
            <% if flash[:notice] %>
              <div class="alert alert-success"><%= flash[:notice] %></div>
            <% end %>
            <% if flash[:alert] || flash[:error] %>
              <div class="alert alert-error"><%= flash[:alert] || flash[:error] %></div>
            <% end %>

            <%= yield %>
          </div>
        <% end %>
      </main>
    </div>
  </body>
</html>
