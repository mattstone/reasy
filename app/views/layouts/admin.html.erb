<!DOCTYPE html>
<html>
  <head>
    <title>Admin - Reasy</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="icon" href="/icon.png" type="image/png">
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <div class="dashboard-layout">
      <aside class="dashboard-sidebar">
        <%= link_to admin_dashboard_path do %>
          <%= image_tag "Reasy Logo Beige.png", alt: "Reasy Admin", class: "dashboard-sidebar-logo" %>
        <% end %>

        <p class="text-sm" style="color: var(--reasy-orange); margin-bottom: var(--reasy-space-6);">Admin Panel</p>

        <nav>
          <ul class="dashboard-nav">
            <li class="dashboard-nav-item">
              <%= link_to admin_dashboard_path, class: current_page?(admin_dashboard_path) ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                Dashboard
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_users_path, class: controller_name == "users" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                Users
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_properties_path, class: controller_name == "properties" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                Properties
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_transactions_path, class: controller_name == "transactions" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                Transactions
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_reviews_path, class: controller_name == "reviews" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                Reviews
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_ai_conversations_path, class: controller_name == "ai_conversations" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                AI Conversations
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_audit_logs_path, class: controller_name == "audit_logs" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                Audit Logs
              <% end %>
            </li>
            <li class="dashboard-nav-item">
              <%= link_to admin_settings_path, class: controller_name == "settings" ? "active" : "" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                Settings
              <% end %>
            </li>
          </ul>
        </nav>

        <div style="margin-top: auto; padding-top: var(--reasy-space-8); border-top: 1px solid rgba(255,255,255,0.1);">
          <%= link_to dashboard_path, class: "btn btn-sm btn-secondary", style: "width: 100%; margin-bottom: var(--reasy-space-3);" do %>
            ‚Üê Back to Site
          <% end %>
          <div class="text-sm" style="color: var(--reasy-gray-400); margin-bottom: var(--reasy-space-2);">
            <%= current_user.email %>
          </div>
          <%= button_to "Log out", destroy_user_session_path, method: :delete, class: "btn btn-sm btn-secondary", style: "width: 100%;" %>
        </div>
      </aside>

      <main class="dashboard-main">
        <% if flash[:notice] %>
          <div class="alert alert-success"><%= flash[:notice] %></div>
        <% end %>
        <% if flash[:alert] || flash[:error] %>
          <div class="alert alert-error"><%= flash[:alert] || flash[:error] %></div>
        <% end %>

        <%= yield %>
      </main>
    </div>
  </body>
</html>
